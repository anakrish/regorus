# Copyright (c) Microsoft Corporation.
# Licensed under the MIT License.

# Arithmetic Operations Test Suite
# Tests mathematical operations: Add, Sub, Mul, Div
# These instructions perform basic arithmetic on numeric values

cases:
  - note: arithmetic_add
    description: Test Add instruction
    example_rego: "10 + 5"  # Addition expression
    literals:
      - 10
      - 5
    instructions:
      - "Load { dest: 0, literal_idx: 0 }"  # Load literal 10 into register 0
      - "Load { dest: 1, literal_idx: 1 }"  # Load literal 5 into register 1
      - "Add { dest: 2, left: 0, right: 1 }"  # Add register 0 + register 1, store in register 2
      - "Return { value: 2 }"               # Return result from register 2
    want_result: 15

  - note: arithmetic_sub
    description: Test Sub instruction
    example_rego: "10 - 3"  # Subtraction expression
    literals:
      - 10
      - 3
    instructions:
      - "Load { dest: 0, literal_idx: 0 }"  # Load literal 10 into register 0
      - "Load { dest: 1, literal_idx: 1 }"  # Load literal 3 into register 1
      - "Sub { dest: 2, left: 0, right: 1 }"  # Subtract register 1 from register 0, store in register 2
      - "Return { value: 2 }"               # Return result from register 2
    want_result: 7

  - note: arithmetic_mul
    description: Test Mul instruction
    example_rego: "4 * 6"  # Multiplication expression
    literals:
      - 4
      - 6
    instructions:
      - "Load { dest: 0, literal_idx: 0 }"  # Load literal 4 into register 0
      - "Load { dest: 1, literal_idx: 1 }"  # Load literal 6 into register 1
      - "Mul { dest: 2, left: 0, right: 1 }"  # Multiply register 0 * register 1, store in register 2
      - "Return { value: 2 }"               # Return result from register 2
    want_result: 24

  - note: arithmetic_div
    description: Test Div instruction
    example_rego: "15 / 3"  # Division expression
    literals:
      - 15
      - 3
    instructions:
      - "Load { dest: 0, literal_idx: 0 }"  # Load literal 15 into register 0
      - "Load { dest: 1, literal_idx: 1 }"  # Load literal 3 into register 1
      - "Div { dest: 2, left: 0, right: 1 }"  # Divide register 0 / register 1, store in register 2
      - "Return { value: 2 }"               # Return result from register 2
    want_result: 5
